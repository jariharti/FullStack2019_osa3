(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,n,t){e.exports=t(38)},18:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(11),i=t.n(r),c=(t(18),t(2)),u=t(3),l=t.n(u),s="/api/persons",m=function(){return l.a.get(s).then(function(e){return e})},f=function(e){return l.a.post(s,e).then(function(e){return e})},d=function(e){return l.a.delete("".concat(s,"/").concat(e.id)).then(function(e){return e})},g=function(e){return l.a.put("".concat(s,"/").concat(e.id),e).then(function(e){return e})},h=function(e){return e.persons.filter(function(n){return 0===n.name.toLowerCase().indexOf(e.limitVisibility.toLowerCase())}).map(function(n){return a.a.createElement("p",{key:n.name},"\xa0",n.name," ",n.number,a.a.createElement("input",{type:"button",name:n.name,value:"poista",onClick:e.deleteName}))})},p=function(e){return a.a.createElement("div",null,"\xa0rajaa n\xe4ytett\xe4vi\xe4 ",a.a.createElement("input",{type:"text",name:"rajaa n\xe4ytett\xe4vi\xe4",value:e.limitVisibility,onChange:e.handVisibilityChange}))},b=function(e){return a.a.createElement("form",{onSubmit:e.addName},a.a.createElement("div",null,"\xa0nimi: ",a.a.createElement("input",{value:e.new_name,onChange:e.handleNameChange}),a.a.createElement("br",null),"\xa0numero: ",a.a.createElement("input",{value:e.new_number,onChange:e.handleNumberChange})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},v=function(e){return null===e.message?null:a.a.createElement("div",{className:e.notificationMessageType},e.message)},w=function(){var e=Object(o.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],i=Object(o.useState)(""),u=Object(c.a)(i,2),l=u[0],s=u[1],w=Object(o.useState)(""),y=Object(c.a)(w,2),E=y[0],j=y[1],O=Object(o.useState)(""),k=Object(c.a)(O,2),N=k[0],C=k[1],S=Object(o.useState)(),T=Object(c.a)(S,2),V=T[0],_=T[1],J=Object(o.useState)(),x=Object(c.a)(J,2),L=x[0],P=x[1];Object(o.useEffect)(function(){console.log("getAll"),m().then(function(e){console.log("getall operation succeeded",e),r(e.data),_("Phonebook information received successfully"),P("success"),setTimeout(function(){_(null)},5e3)}).catch(function(e){_("Oops.. Something went wrong when application tried to read phonebook data from the server"),P("error"),setTimeout(function(){_(null),P("error")},5e3)})},[]);return a.a.createElement("div",null,a.a.createElement("h1",null,"\xa0Puhelinluettelo"),a.a.createElement(v,{message:V,notificationMessageType:L}),a.a.createElement(p,{limitVisibility:N,handVisibilityChange:function(e){C(e.target.value)}}),a.a.createElement("h2",null,"\xa0Lis\xe4\xe4 uusi"),a.a.createElement(b,{addName:function(e){if(console.log("addName"),e.preventDefault(),t.map(function(e){return e.name}).includes(l)){if(console.log("Nimi jo puhelinluettelossa, testaa seuraavaksi onko puhelinumero eri"),t.filter(function(e){return e.name===l})[0].number===E)console.log("Nimi jo puhelinluettelossa, samoin puhelinnumero"),alert("".concat(l," on jo luettelossa"));else if(console.log("Haluat korvata vanhan numeron uudella"),window.confirm("".concat(l," on jo luettelossa, korvataanko vanha numero uudella?"))){console.log("vastasit OK");var n={name:t.filter(function(e){return e.name===l})[0].name,number:E,id:t.filter(function(e){return e.name===l})[0].id};console.log("updated_name",n),g(n).then(function(e){console.log("update operation succeeded",e),console.log("persons",t),r(t.filter(function(e){return e.id!==n.id}).concat(n)),_("".concat(l,"'s phone number changed succesfully to ").concat(E)),P("success"),setTimeout(function(){_(null),P("success")},5e3)}).catch(function(e){console.log("error situation"),_("Unfourtunately ".concat(l," data already removed from server")),P("error"),r(t.filter(function(e){return e.id!==n.id})),setTimeout(function(){_(null),P("error")},5e3)})}}else{var o={name:l,number:E};console.log("nameObject",o),f(o).then(function(e){console.log("received response from create operation",e),r(t.concat(e.data)),_("".concat(e.data.name,"'s data added succesfully to phonebook")),P("success"),setTimeout(function(){_(null),P("success")},5e3)}).catch(function(e){console.log(".catch/error from .create operation",e.response.data),_(JSON.stringify(e.response.data)),P("error"),setTimeout(function(){_(null),P("error")},5e3)}),s(""),j("")}},new_name:l,handleNameChange:function(e){s(e.target.value)},new_number:E,handleNumberChange:function(e){j(e.target.value)}}),a.a.createElement("h2",null,"\xa0Numerot"),a.a.createElement(h,{persons:t,limitVisibility:N,deleteName:function(e){if(console.log("delete name"),window.confirm("Poistetaanko ".concat(e.target.name))){var n=t.filter(function(n){return n.name!==e.target.name}),o=t.filter(function(n){return n.name===e.target.name})[0],a=e.target.name;console.log("event.target.name",e.target.name),d(o).then(function(e){console.log("delete operation ...",e),204===e.status&&(console.log("delete operation succeeded",e),console.log("response ==== 204 => persons left...",n),r(n),_("".concat(a,"'s data removed succesfully from phonebook")),P("success"),setTimeout(function(){_(null),P("success")},5e3))}).catch(function(e){console.log("error 2 situation",e.response.data),_(JSON.stringify(e.response.data)),P("error"),r(n.filter(function(e){return e.id!==o.id})),setTimeout(function(){_(null),P("error")},5e3)})}}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,1,2]]]);
//# sourceMappingURL=main.e0959676.chunk.js.map